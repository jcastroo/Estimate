import{s as r,f as n,m as a,n as m}from"./index-e0b9de87.js";import{B as d}from"./Breadcrumb-8e073eee.js";import{g as s}from"./vform.es-2ce0e762.js";import"./_commonjsHelpers-53f7dec1.js";const i=function(){r.commit("open/forms/startLoading");r.dispatch("open/workspaces/loadIfEmpty").then(()=>{r.dispatch("open/forms/load",r.state["open/workspaces"].currentId)})};const l={name:"EditForm",components:{Breadcrumb:d},beforeRouteEnter(o,e,t){if(!r.getters["open/forms/getBySlug"](o.params.slug)){i()}r.commit("open/working_form/set",null);t()},middleware:"auth",mixins:[n],data(){return{loading:false,error:null,editorMaxHeight:500}},computed:{...a({formsLoading:o=>o["open/forms"].loading}),updatedForm:{get(){return this.$store.state["open/working_form"].content},set(o){this.$store.commit("open/working_form/set",o)}},form(){return this.$store.getters["open/forms/getBySlug"](this.$route.params.slug)},pageLoaded(){return!this.loading&&this.updatedForm!==null},metaTitle(){return"Edit "+(this.form?this.form.title:"Your Form")}},watch:{form(){this.updatedForm=new s(this.form)}},created(){window.addEventListener("resize",this.onResize)},destroyed(){window.removeEventListener("resize",this.onResize)},mounted(){this.closeAlert();if(!this.form){i()}else{this.updatedForm=new s(this.form)}},methods:{onResize(){if(this.$refs.editor){this.editorMaxHeight=Math.max(500,window.innerHeight-this.$refs.editor.$el.offsetTop)}}}};var f=function o(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full flex flex-col"},[e.pageLoaded?t("form-editor",{ref:"editor",style:{"max-height":e.editorMaxHeight+"px"},attrs:{"isEdit":true},on:{"mounted":e.onResize}}):!e.loading&&e.error?t("div",{staticClass:"mt-4 rounded-lg max-w-xl mx-auto p-6 bg-red-100 text-red-500"},[e._v(" "+e._s(e.error)+" ")]):t("div",{staticClass:"text-center mt-4 py-6"},[t("loader",{staticClass:"h-6 w-6 text-nt-blue mx-auto"})],1)],1)};var u=[];var p=m(l,f,u,false,null,null,null,null);const w=p.exports;export{w as default};
