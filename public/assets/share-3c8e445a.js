import{n as a,t as l,d as i,f as m}from"./index-e0b9de87.js";import{P as u}from"./ProTag-1df65437.js";import{a as d}from"./VTransition-df8a861d.js";import{C as c}from"./Collapse-424b0776.js";import"./_commonjsHelpers-53f7dec1.js";import"./vform.es-2ce0e762.js";import"./index-66fb023c.js";const f={name:"CopyContent",props:{content:{type:String,required:true}},data(){return{}},computed:{},watch:{},mounted(){},methods:{copyToClipboard(r){const e=document.createElement("textarea");e.value=r;document.body.appendChild(e);e.select();document.execCommand("copy");document.body.removeChild(e);this.alertSuccess("Copied!")}}};var p=function r(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-wrap sm:flex-nowrap my-4 w-full"},[t("div",{staticClass:"w-full sm:w-auto border border-gray-300 rounded-md p-2 flex-grow select-all bg-gray-100"},[t("p",{staticClass:"select-all text-gray-900"},[e._v(" "+e._s(e.content)+" ")])]),t("div",{staticClass:"w-full sm:w-40 sm:ml-2 mt-2 sm:mt-0 shrink-0"},[t("v-button",{staticClass:"w-full",attrs:{"color":"light-gray"},on:{"click":function(o){return e.copyToClipboard(e.content)}}},[e._t("icon",function(){return[t("svg",{staticClass:"h-4 w-4 -mt-1 text-blue-600 inline mr-1",attrs:{"viewBox":"0 0 20 20","fill":"none","xmlns":"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"d":"M4.16667 12.4998C3.3901 12.4998 3.00182 12.4998 2.69553 12.373C2.28715 12.2038 1.9627 11.8794 1.79354 11.471C1.66667 11.1647 1.66667 10.7764 1.66667 9.99984V4.33317C1.66667 3.39975 1.66667 2.93304 1.84833 2.57652C2.00812 2.26292 2.26308 2.00795 2.57669 1.84816C2.93321 1.6665 3.39992 1.6665 4.33334 1.6665H10C10.7766 1.6665 11.1649 1.6665 11.4711 1.79337C11.8795 1.96253 12.204 2.28698 12.3731 2.69536C12.5 3.00165 12.5 3.38993 12.5 4.1665M10.1667 18.3332H15.6667C16.6001 18.3332 17.0668 18.3332 17.4233 18.1515C17.7369 17.9917 17.9919 17.7368 18.1517 17.4232C18.3333 17.0666 18.3333 16.5999 18.3333 15.6665V10.1665C18.3333 9.23308 18.3333 8.76637 18.1517 8.40985C17.9919 8.09625 17.7369 7.84128 17.4233 7.68149C17.0668 7.49984 16.6001 7.49984 15.6667 7.49984H10.1667C9.23325 7.49984 8.76654 7.49984 8.41002 7.68149C8.09642 7.84128 7.84145 8.09625 7.68166 8.40985C7.50001 8.76637 7.50001 9.23308 7.50001 10.1665V15.6665C7.50001 16.5999 7.50001 17.0666 7.68166 17.4232C7.84145 17.7368 8.09642 17.9917 8.41002 18.1515C8.76654 18.3332 9.23325 18.3332 10.1667 18.3332Z","stroke":"currentColor","stroke-width":"1.66667","stroke-linecap":"round","stroke-linejoin":"round"}})])]}),e._t("default")],2)],1)])};var h=[];var _=a(f,p,h,false,null,null,null,null);const n=_.exports;const v={name:"ShareLink",components:{CopyContent:n},props:{form:{type:Object,required:true},extraQueryParam:{type:String,default:""}},data:()=>({}),computed:{share_url(){return this.extraQueryParam?this.form.share_url+"?"+this.extraQueryParam:this.form.share_url+this.extraQueryParam}},methods:{}};var g=function r(){var e=this,t=e._self._c;return t("div",[t("h3",{staticClass:"font-semibold text-xl"},[e._v("Share Link")]),t("p",[e._v("Your form is now published and ready to be shared with the world! Copy this link to share your form on social media, messaging apps or via email.")]),t("copy-content",{attrs:{"content":e.share_url},scopedSlots:e._u([{key:"icon",fn:function(){return[t("svg",{staticClass:"h-4 w-4 -mt-1 text-blue-600 inline mr-1",attrs:{"viewBox":"0 0 20 10","fill":"none","xmlns":"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"d":"M7.49984 9.16634H5.83317C3.53198 9.16634 1.6665 7.30086 1.6665 4.99967C1.6665 2.69849 3.53198 0.833008 5.83317 0.833008H7.49984M12.4998 9.16634H14.1665C16.4677 9.16634 18.3332 7.30086 18.3332 4.99967C18.3332 2.69849 16.4677 0.833008 14.1665 0.833008H12.4998M5.83317 4.99967L14.1665 4.99968","stroke":"currentColor","stroke-width":"1.66667","stroke-linecap":"round","stroke-linejoin":"round"}})])]},proxy:true}])},[e._v(" Copy Link ")])],1)};var C=[];var w=a(v,g,C,false,null,null,null,null);const y=w.exports;const b={name:"EmbedCode",components:{CopyContent:n},props:{form:{type:Object,required:true},extraQueryParam:{type:String,default:""}},data:()=>({}),computed:{embedCode(){const r=this.extraQueryParam?this.form.share_url+"?"+this.extraQueryParam:this.form.share_url+this.extraQueryParam;return'<iframe style="border:none;width:100%;" height="'+this.formHeight+'px" src="'+r+'"></iframe>'},formHeight(){let r=200;if(!this.form.hide_title&&!this.extraQueryParam){r+=60}r+=this.form.properties.filter(e=>{return!e.hidden}).length*70;return r}},methods:{}};var x=function r(){var e=this,t=e._self._c;return t("div",[t("h3",{staticClass:"font-semibold text-xl"},[e._v("Embed")]),t("p",[e._v("Embed your form on your website by copying the HTML code below.")]),t("copy-content",{attrs:{"content":e.embedCode,"buttonText":"Copy Code"},scopedSlots:e._u([{key:"icon",fn:function(){return[t("svg",{staticClass:"h-4 w-4 -mt-1 text-blue-600 inline mr-1",attrs:{"viewBox":"0 0 18 18","fill":"none","xmlns":"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"d":"M11.0833 11.5L13.5833 9L11.0833 6.5M6.91667 6.5L4.41667 9L6.91667 11.5M5.5 16.5H12.5C13.9001 16.5 14.6002 16.5 15.135 16.2275C15.6054 15.9878 15.9878 15.6054 16.2275 15.135C16.5 14.6002 16.5 13.9001 16.5 12.5V5.5C16.5 4.09987 16.5 3.3998 16.2275 2.86502C15.9878 2.39462 15.6054 2.01217 15.135 1.77248C14.6002 1.5 13.9001 1.5 12.5 1.5H5.5C4.09987 1.5 3.3998 1.5 2.86502 1.77248C2.39462 2.01217 2.01217 2.39462 1.77248 2.86502C1.5 3.3998 1.5 4.09987 1.5 5.5V12.5C1.5 13.9001 1.5 14.6002 1.77248 15.135C2.01217 15.6054 2.39462 15.9878 2.86502 16.2275C3.3998 16.5 4.09987 16.5 5.5 16.5Z","stroke":"currentColor","stroke-width":"1.66667","stroke-linecap":"round","stroke-linejoin":"round"}})])]},proxy:true}])},[e._v(" Copy Code ")])],1)};var k=[];var F=a(b,x,k,false,null,null,null,null);const $=F.exports;const L={name:"FormUrlPrefill",props:{form:{type:Object,required:true},formData:{type:Object,required:true},extraQueryParam:{type:String,default:""}},data(){return{}},computed:{preFillUrl(){const r=this.form.share_url;const e=new URLSearchParams;this.form.properties.filter(t=>{return this.formData.hasOwnProperty(t.id)&&this.formData[t.id]!==null}).forEach(t=>{if(Array.isArray(this.formData[t.id])){this.formData[t.id].forEach(o=>{e.append(t.id+"[]",o)})}else{e.append(t.id,this.formData[t.id])}});if(e.toString()!==""){return this.extraQueryParam?r+"?"+e+"&"+this.extraQueryParam:r+"?"+e}else{return this.extraQueryParam?r+"?"+this.extraQueryParam:r}}},watch:{},mounted(){},methods:{getPropertyUriComponent(r){const e=encodeURIComponent(this.formData[r.id]);return encodeURIComponent(r.id)+"="+e},copyToClipboard(){const r=this.preFillUrl;const e=document.createElement("textarea");e.value=r;document.body.appendChild(e);e.select();document.execCommand("copy");document.body.removeChild(e)}}};var U=function r(){var e=this,t=e._self._c;return t("div",{staticClass:"border border-nt-blue-light bg-blue-50 dark:bg-notion-dark-light shadow rounded-md p-4 mb-5 w-full mx-auto mt-4 select-all"},[t("div",{staticClass:"flex items-center"},[t("p",{staticClass:"select-all flex-grow break-all",domProps:{"innerHTML":e._s(e.preFillUrl)}}),t("div",{staticClass:"hover:bg-nt-blue-lighter rounded transition-colors cursor-pointer",on:{"click":e.copyToClipboard}},[t("svg",{staticClass:"h-6 w-6 text-nt-blue",attrs:{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","d":"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"}})])])])])};var P=[];var M=a(L,U,P,false,null,null,null,null);const R=M.exports;const H={name:"UrlFormPrefill",components:{FormUrlPrefill:R,ProTag:u,OpenForm:d},props:{form:{type:Object,required:true},extraQueryParam:{type:String,default:""}},data:()=>({prefillFormData:null,theme:l.default,showUrlFormPrefillModal:false}),computed:{},methods:{generateUrl(r,e){this.prefillFormData=r;this.$nextTick().then(()=>{this.$refs.content.parentElement.parentElement.parentElement.scrollTop=this.$refs.content.offsetHeight-this.$refs.content.parentElement.parentElement.parentElement.offsetHeight+50})}}};var S=function r(){var e=this,t=e._self._c;return t("div",[t("v-button",{directives:[{name:"track",rawName:"v-track.url_form_prefill_click",value:{form_id:e.form.id,form_slug:e.form.slug},expression:"{form_id:form.id, form_slug:form.slug}",modifiers:{"url_form_prefill_click":true}}],staticClass:"w-full",attrs:{"color":"light-gray"},on:{"click":function(o){e.showUrlFormPrefillModal=true}}},[t("svg",{staticClass:"h-6 w-6 mr-4 text-blue-600 inline",attrs:{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","d":"M17 16v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-7a2 2 0 012-2h2m3-4H9a2 2 0 00-2 2v7a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-1m-1 4l-3 3m0 0l-3-3m3 3V3"}})]),e._v(" Url form pre-fill "),t("pro-tag",{staticClass:"ml-2"})],1),t("modal",{attrs:{"show":e.showUrlFormPrefillModal},on:{"close":function(o){e.showUrlFormPrefillModal=false}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("svg",{staticClass:"w-10 h-10 text-blue",attrs:{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","d":"M17 16v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-7a2 2 0 012-2h2m3-4H9a2 2 0 00-2 2v7a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-1m-1 4l-3 3m0 0l-3-3m3 3V3"}})])]},proxy:true},{key:"title",fn:function(){return[t("span",[e._v("Url Form Prefill")]),t("pro-tag",{staticClass:"ml-4 pb-3"})]},proxy:true}])},[t("div",{staticClass:"p-4"},[t("p",[e._v(" Create dynamic links when sharing your form (whether it's embedded or not), that allows you to prefill your form fields. You can use this to personalize the form when sending it to multiple contacts for instance. ")]),t("h3",{staticClass:"mt-6 border-t text-xl font-semibold mb-4 pt-6"},[e._v(" How does it work? ")]),t("p",[e._v(" Complete your form below and fill only the fields you want to prefill. You can even leave the required fields empty. ")]),t("div",{staticClass:"rounded-lg p-5 bg-gray-100 dark:bg-gray-900 mt-4"},[e.form?t("open-form",{attrs:{"theme":e.theme,"loading":false,"show-hidden":true,"form":e.form,"fields":e.form.properties},on:{"submit":e.generateUrl},scopedSlots:e._u([{key:"submit-btn",fn:function({submitForm:o}){return[t("v-button",{staticClass:"mt-2 px-8 mx-1",on:{"click":function(s){s.preventDefault();return o.apply(null,arguments)}}},[e._v(" Generate Pre-filled URL ")])]}}],null,false,2112750635)}):e._e()],1),e.prefillFormData?[t("h3",{staticClass:"mt-6 text-xl font-semibold mb-4 pt-6"},[e._v(" Your Prefill url ")]),t("form-url-prefill",{attrs:{"form":e.form,"form-data":e.prefillFormData,"extra-query-param":e.extraQueryParam}})]:e._e()],2)])],1)};var Q=[];var j=a(H,S,Q,false,null,null,null,null);const E=j.exports;const T={name:"RegenerateFormLink",components:{},props:{form:{type:Object,required:true}},data:()=>({loadingNewLink:false,showGenerateFormLinkModal:false}),computed:{formEndpoint:()=>"/api/open/forms/{id}"},methods:{regenerateLink(r){if(this.loadingNewLink)return;this.loadingNewLink=true;i.put(this.formEndpoint.replace("{id}",this.form.id)+"/regenerate-link/"+r).then(e=>{this.$store.commit("open/forms/addOrUpdate",e.data.form);this.$router.push({name:"forms.show",params:{slug:e.data.form.slug}});this.alertSuccess(e.data.message);this.loadingNewLink=false}).finally(()=>{this.showGenerateFormLinkModal=false})}}};var q=function r(){var e=this,t=e._self._c;return t("div",[t("v-button",{directives:[{name:"track",rawName:"v-track.regenerate_form_link_click",value:{form_id:e.form.id,form_slug:e.form.slug},expression:"{form_id:form.id, form_slug:form.slug}",modifiers:{"regenerate_form_link_click":true}}],staticClass:"w-full",attrs:{"color":"light-gray"},on:{"click":function(o){e.showGenerateFormLinkModal=true}}},[t("svg",{staticClass:"h-6 w-6 mr-4 text-blue-600 inline",attrs:{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","d":"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"}})]),e._v(" Regenerate form link ")]),t("modal",{attrs:{"show":e.showGenerateFormLinkModal},on:{"close":function(o){e.showGenerateFormLinkModal=false}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("svg",{staticClass:"w-10 h-10 text-blue-600",attrs:{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","d":"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"}})])]},proxy:true},{key:"title",fn:function(){return[e._v(" Generate new form link ")]},proxy:true}])},[t("div",{staticClass:"p-4"},[t("p",[e._v(" You can choose between two different URL formats for your form. "),t("span",{staticClass:"font-semibold"},[e._v("Be careful, changing your form URL is not a reversible operation")]),e._v(". Make sure to udpate your form URL everywhere where it's used. ")]),t("div",{staticClass:"border-t py-4 mt-4"},[t("h3",{staticClass:"text-xl text-gray-700 font-semibold"},[e._v(" Human Readable URL ")]),t("p",[e._v("If your users are going to see this url, you might want to make nice and readable. Example:")]),t("p",{staticClass:"text-gray-600 border p-4 bg-gray-50 rounded-md mt-4"},[e._v(" https://opnform.com/forms/contact ")]),t("div",{staticClass:"text-center mt-4"},[t("v-button",{attrs:{"loading":e.loadingNewLink,"color":"outline-blue"},on:{"click":function(o){return e.regenerateLink("slug")}}},[e._v(" Generate a Human Readable URL ")])],1)]),t("div",{staticClass:"border-t pt-4 mt-4"},[t("h3",{staticClass:"text-xl text-gray-700 font-semibold"},[e._v(" Random ID URL ")]),t("p",[e._v(" If your user are not going to see your form url (if it's embedded), and if you prefer to have a random non-guessable URL. Example: ")]),t("p",{staticClass:"text-gray-600 p-4 border bg-gray-50 rounded-md mt-4"},[e._v(" https://opnform.com/forms/b4417f9c-34ae-4421-8006-832ee47786e7 ")]),t("div",{staticClass:"text-center mt-4"},[t("v-button",{attrs:{"loading":e.loadingNewLink,"color":"outline-blue"},on:{"click":function(o){return e.regenerateLink("uuid")}}},[e._v(" Generate a Random ID URL ")])],1)])])])],1)};var D=[];var O=a(T,q,D,false,null,null,null,null);const B=O.exports;const V={name:"AdvancedFormUrlSettings",components:{Collapse:c},props:{form:{type:Object,required:true},value:{type:Object,required:true}},data(){return{}},computed:{hideTitleHelp(){return this.form.hide_title?"This option is disabled because the form title is already hidden":null}},watch:{},mounted(){},methods:{onChangeHideTitle(r){this.value.hide_title=r},onChangeAutoSubmit(r){this.value.auto_submit=r}}};var G=function r(){var e=this,t=e._self._c;return t("collapse",{staticClass:"py-5 w-full",attrs:{"default-value":false},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"flex"},[t("h3",{staticClass:"font-semibold block text-lg"},[t("svg",{staticClass:"h-5 w-5 inline text-gray-500 mr-2 -mt-1",attrs:{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","d":"M4 6h16M4 12h16M4 18h16"}})]),e._v(" Show advanced options ")])])]},proxy:true}])},[t("toggle-switch-input",{staticClass:"mt-4",attrs:{"value":e.value.hide_title,"name":"hide_title","label":"Hide Form Title","disabled":e.form.hide_title===true,"help":e.hideTitleHelp},on:{"input":e.onChangeHideTitle}}),t("toggle-switch-input",{staticClass:"mt-4",attrs:{"value":e.value.auto_submit,"name":"auto_submit","label":"Auto Submit Form","help":"Form will auto submit immediate after open URL"},on:{"input":e.onChangeAutoSubmit}})],1)};var I=[];var N=a(V,G,I,false,null,null,null,null);const A=N.exports;const Y={components:{ShareLink:y,EmbedCode:$,UrlFormPrefill:E,RegenerateFormLink:B,AdvancedFormUrlSettings:A},props:{form:{type:Object,required:true}},mixins:[m],data:()=>({shareFormConfig:{hide_title:false,auto_submit:false}}),mounted(){},computed:{metaTitle(){return this.form?"Form Share - "+this.form.title:"Form Share"},shareUrlForQueryParams(){let r="";for(const[e,t]of Object.entries(this.shareFormConfig)){if(t&&t!=="false"&&t!==false){r+="&"+encodeURIComponent(e)+"="+encodeURIComponent(t)}}return r.slice(1)}},methods:{}};var z=function r(){var e=this,t=e._self._c;return t("div",[t("share-link",{staticClass:"mt-4",attrs:{"form":e.form,"extra-query-param":e.shareUrlForQueryParams}}),t("embed-code",{staticClass:"mt-6",attrs:{"form":e.form,"extra-query-param":e.shareUrlForQueryParams}}),t("advanced-form-url-settings",{attrs:{"form":e.form},model:{value:e.shareFormConfig,callback:function(o){e.shareFormConfig=o},expression:"shareFormConfig"}}),t("div",{staticClass:"mt-6 pt-6 border-t w-full flex"},[t("regenerate-form-link",{staticClass:"sm:w-1/2 mr-4",attrs:{"form":e.form}}),t("url-form-prefill",{staticClass:"sm:w-1/2",attrs:{"form":e.form,"extra-query-param":e.shareUrlForQueryParams}})],1)],1)};var Z=[];var J=a(Y,z,Z,false,null,null,null,null);const ae=J.exports;export{ae as default};
