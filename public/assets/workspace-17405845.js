import{g as r}from"./vform.es-2ce0e762.js";import{f as n,m as i,g as l,n as c}from"./index-e0b9de87.js";import"./_commonjsHelpers-53f7dec1.js";const d={components:{},scrollToTop:false,mixins:[n],data:()=>({metaTitle:"Workspaces",form:new r({name:"",emoji:""}),workspaceModal:false}),mounted(){this.loadWorkspaces()},computed:{...i({workspaces:o=>o["open/workspaces"].content,loading:o=>o["open/workspaces"].loading})},methods:{...l({loadWorkspaces:"open/workspaces/loadIfEmpty"}),switchWorkspace(o){this.$store.commit("open/workspaces/setCurrentId",o.id);this.$router.push({name:"home"});this.$store.dispatch("open/forms/load",o.id)},deleteWorkspace(o){this.alertConfirm("Do you really want to delete this workspace? All forms created in this workspace will be removed.",()=>{this.$store.dispatch("open/workspaces/delete",o.id).then(()=>{this.alertSuccess("Workspace successfully removed.")})})},isUrl(o){const t=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return!!t.test(o)},async createWorkspace(){await this.form.post("/api/open/workspaces/create");this.$store.dispatch("open/workspaces/load");this.workspaceModal=false}}};var p=function o(){var t=this,e=t._self._c;return e("div",[e("h3",{staticClass:"font-semibold text-2xl text-gray-900"},[t._v("Workspace settings")]),e("small",{staticClass:"text-gray-600"},[t._v("Manage your workspaces.")]),t.loading?e("div",{staticClass:"w-full text-blue-500 text-center"},[e("loader",{staticClass:"h-10 w-10 p-5"})],1):e("div",[t._l(t.workspaces,function(s){return e("div",{key:s.id,staticClass:"mt-4 p-4 flex group bg-white hover:bg-gray-50 dark:bg-notion-dark items-center"},[e("div",{staticClass:"flex space-x-4 flex-grow items-center cursor-pointer",attrs:{"role":"button"},on:{"click":function(a){a.preventDefault();return t.switchWorkspace(s)}}},[t.isUrl(s.icon)?e("img",{staticClass:"rounded-full h-12 w-12",attrs:{"src":s.icon,"alt":s.name+" icon"}}):e("div",{staticClass:"rounded-2xl bg-gray-100 h-12 w-12 text-2xl pt-2 text-center overflow-hidden",domProps:{"textContent":t._s(s.icon)}}),e("div",{staticClass:"space-y-4 py-1"},[e("div",{staticClass:"font-bold truncate"},[t._v(t._s(s.name))])])]),t.workspaces.length>1?e("div",{staticClass:"block md:hidden group-hover:block text-red-500 p-2 rounded hover:bg-red-50",attrs:{"role":"button"},on:{"click":function(a){return t.deleteWorkspace(s)}}},[e("svg",{staticClass:"h-6 w-6",attrs:{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","d":"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}})])]):t._e()])}),e("v-button",{staticClass:"mt-4",attrs:{"loading":t.loading},on:{"click":function(s){t.workspaceModal=true}}},[e("svg",{staticClass:"inline text-white mr-1 h-4 w-4",attrs:{"viewBox":"0 0 14 14","fill":"none","xmlns":"http://www.w3.org/2000/svg"}},[e("path",{attrs:{"d":"M6.99996 1.16699V12.8337M1.16663 7.00033H12.8333","stroke":"currentColor","stroke-width":"1.67","stroke-linecap":"round","stroke-linejoin":"round"}})]),t._v(" Create new workspace ")])],2),e("modal",{attrs:{"show":t.workspaceModal,"max-width":"lg"},on:{"close":function(s){t.workspaceModal=false}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("svg",{staticClass:"w-8 h-8",attrs:{"viewBox":"0 0 24 24","fill":"none","xmlns":"http://www.w3.org/2000/svg"}},[e("path",{attrs:{"d":"M12 8V16M8 12H16M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z","stroke":"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])]},proxy:true},{key:"title",fn:function(){return[t._v(" Create Workspace ")]},proxy:true}])},[e("div",{staticClass:"px-4"},[e("form",{on:{"submit":function(s){s.preventDefault();return t.createWorkspace.apply(null,arguments)},"keydown":function(s){return t.form.onKeydown(s)}}},[e("div",[e("text-input",{staticClass:"mt-4",attrs:{"name":"name","form":t.form,"required":true,"label":"Workspace Name"}}),e("text-input",{staticClass:"mt-4",attrs:{"name":"emoji","form":t.form,"required":false,"label":"Emoji"}})],1),e("div",{staticClass:"w-full mt-6"},[e("v-button",{staticClass:"w-full my-3",attrs:{"loading":t.form.busy}},[t._v("Save")])],1)])])])],1)};var u=[];var m=c(d,p,u,false,null,null,null,null);const v=m.exports;export{v as default};
