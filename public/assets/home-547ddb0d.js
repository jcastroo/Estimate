import{T as l,c as n,m as c,F as m,n as d,s as i}from"./index-e0b9de87.js";import{g as u}from"./vform.es-2ce0e762.js";import{O as g}from"./OpenFormFooter-53c3b41e.js";import{E as h}from"./ExtraMenu-26b0ae02.js";import"./_commonjsHelpers-53f7dec1.js";const f=function(){i.commit("open/forms/startLoading");i.dispatch("open/workspaces/loadIfEmpty").then(()=>{i.dispatch("open/forms/loadIfEmpty",i.state["open/workspaces"].currentId)})};const p={components:{OpenFormFooter:g,TextInput:l,ExtraMenu:h},beforeRouteEnter(r,t,e){f();e()},middleware:"auth",props:{metaTitle:{type:String,default:"Your Forms"},metaDescription:{type:String,default:"All of your OpnForm are here. Create new forms, or update your existing one!"}},data(){return{showEditFormModal:false,selectedForm:null,searchForm:new u({search:""}),selectedTags:[]}},mounted(){},methods:{editForm(r){this.selectedForm=r;this.showEditFormModal=true},onTagClick(r){const t=this.selectedTags.indexOf(r);if(t===-1){this.selectedTags.push(r)}else{this.selectedTags.splice(t,1)}},viewForm(r){this.$router.push({name:"forms.show",params:{slug:r.slug}})}},computed:{...n({user:"auth/user"}),...c({forms:r=>r["open/forms"].content,formsLoading:r=>r["open/forms"].loading}),isFilteringForms(){return this.searchForm.search!==""&&this.searchForm.search!==null||this.selectedTags.length>0},enrichedForms(){let r=this.forms.map(s=>{s.workspace=this.$store.getters["open/workspaces/getById"](s.workspace_id);return s});if(this.selectedTags.length>0){r=r.filter(s=>{return s.tags&&s.tags.length>0?this.selectedTags.every(a=>s.tags.includes(a)):false})}if(!this.isFilteringForms||this.searchForm.search===""||this.searchForm.search===null){return r}const t={keys:["title","slug","tags"]};const e=new m(r,t);return e.search(this.searchForm.search).map(s=>{return s.item})},allTags(){return this.$store.getters["open/forms/getAllTags"]}}};var _=function r(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white"},[e("div",{staticClass:"flex bg-gray-50 pb-5"},[e("div",{staticClass:"w-full md:w-4/5 lg:w-3/5 md:mx-auto md:max-w-4xl p-4"},[e("div",{staticClass:"pt-4 pb-0"},[e("div",{staticClass:"flex"},[e("h2",{staticClass:"flex-grow text-gray-900"},[t._v(" Your Forms ")]),e("v-button",{directives:[{name:"track",rawName:"v-track.create_form_click",modifiers:{"create_form_click":true}}],attrs:{"to":{name:"forms.create"}}},[e("svg",{staticClass:"w-4 h-4 text-white inline mr-1 -mt-1",attrs:{"viewBox":"0 0 14 14","fill":"none","xmlns":"http://www.w3.org/2000/svg"}},[e("path",{attrs:{"d":"M6.99996 1.1665V12.8332M1.16663 6.99984H12.8333","stroke":"currentColor","stroke-width":"1.67","stroke-linecap":"round","stroke-linejoin":"round"}})]),t._v(" Create a new form ")])],1),e("small",{staticClass:"flex text-gray-500"},[t._v("Manage your forms and submissions.")])])])]),e("div",{staticClass:"flex bg-white"},[e("div",{staticClass:"w-full md:w-4/5 lg:w-3/5 md:mx-auto md:max-w-4xl px-4"},[e("div",{staticClass:"mt-8 pb-0"},[t.forms.length>0?e("text-input",{staticClass:"mb-6",attrs:{"form":t.searchForm,"name":"search","label":"Search a form","placeholder":"Name of form to search"}}):t._e(),t.allTags.length>0?e("div",{staticClass:"mb-6"},t._l(t.allTags,function(s){return e("div",{key:s,class:["text-white p-2 text-xs inline rounded-lg font-semibold cursor-pointer mr-2",{"bg-gray-500 dark:bg-gray-400":t.selectedTags.includes(s),"bg-gray-300 dark:bg-gray-700":!t.selectedTags.includes(s)}],attrs:{"title":"Click for filter by tag(s)"},on:{"click":function(a){return t.onTagClick(s)}}},[t._v(" "+t._s(s)+" ")])}),0):t._e(),!t.formsLoading&&t.enrichedForms.length===0?e("div",{staticClass:"flex flex-wrap justify-center max-w-4xl"},[e("img",{staticClass:"w-56",attrs:{"loading":"lazy","src":t.asset("img/pages/forms/search_notfound.png"),"alt":"search-not-found"}}),e("h3",{staticClass:"w-full mt-4 text-center text-gray-900 font-semibold"},[t._v("No forms found")]),t.isFilteringForms&&t.enrichedForms.length===0&&t.searchForm.search?e("div",{staticClass:"mt-2 w-full text-center"},[t._v(' Your search "'+t._s(t.searchForm.search)+'" did not match any forms. Please try again. ')]):t._e(),t.forms.length===0?e("v-button",{directives:[{name:"track",rawName:"v-track.create_form_click",modifiers:{"create_form_click":true}}],staticClass:"mt-4",attrs:{"to":{name:"forms.create"}}},[e("svg",{staticClass:"w-4 h-4 text-white inline mr-1 -mt-1",attrs:{"viewBox":"0 0 14 14","fill":"none","xmlns":"http://www.w3.org/2000/svg"}},[e("path",{attrs:{"d":"M6.99996 1.1665V12.8332M1.16663 6.99984H12.8333","stroke":"currentColor","stroke-width":"1.67","stroke-linecap":"round","stroke-linejoin":"round"}})]),t._v(" Create a new form ")]):t._e()],1):t.forms.length>0?e("div",{staticClass:"mb-10"},[t.enrichedForms&&t.enrichedForms.length?e("div",t._l(t.enrichedForms,function(s){return e("div",{key:s.id,staticClass:"mt-4 p-4 flex group bg-white hover:bg-gray-50 dark:bg-notion-dark items-center"},[e("div",{staticClass:"flex-grow items-center truncate cursor-pointer",attrs:{"role":"button"},on:{"click":function(a){a.preventDefault();return t.viewForm(s)}}},[e("span",{staticClass:"font-semibold text-gray-900 dark:text-white"},[t._v(t._s(s.title))]),e("ul",{staticClass:"flex text-gray-500"},[e("li",{staticClass:"pr-1"},[t._v(t._s(s.views_count)+" view"+t._s(s.views_count>0?"s":""))]),e("li",{staticClass:"list-disc ml-6 pr-1"},[t._v(t._s(s.submissions_count)+" submission"+t._s(s.submissions_count>0?"s":"")+" ")]),s.visibility=="draft"?e("li",{staticClass:"list-disc ml-6 pr-1 text-blue-500"},[t._v("Draft (not public)")]):t._e(),e("li",{staticClass:"list-disc ml-6"},[t._v("Edited "+t._s(s.last_edited_human))])]),s.tags&&s.tags.length>0?e("div",{staticClass:"mt-1"},[t._l(s.tags,function(a,o){return[o<1?e("div",{key:a,staticClass:"bg-gray-300 dark:bg-gray-700 text-white px-2 py-1 mr-2 text-xs inline rounded-lg font-semibold"},[t._v(" "+t._s(a)+" ")]):t._e(),o==1?e("div",{key:a,staticClass:"bg-gray-300 dark:bg-gray-700 text-white px-2 py-1 mr-2 text-xs inline rounded-lg font-semibold"},[t._v(" "+t._s(s.tags.length-1)+" more ")]):t._e()]})],2):t._e()]),e("extra-menu",{attrs:{"form":s,"isMainPage":true}})],1)}),0):t._e()]):t._e(),t.formsLoading?e("div",{staticClass:"text-center"},[e("loader",{staticClass:"h-6 w-6 text-nt-blue mx-auto"})],1):t._e()],1)])]),e("open-form-footer",{staticClass:"mt-8 border-t"})],1)};var v=[];var w=d(p,_,v,false,null,null,null,null);const y=w.exports;export{y as default};
