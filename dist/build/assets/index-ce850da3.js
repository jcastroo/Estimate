import{V as n,f as l,c as m,m as u,n as c,s as r}from"./app-d7e169b8.js";import{g as i}from"./vform.es-21186655.js";import{P as d}from"./ProTag-edb3b5aa.js";import{E as f}from"./ExtraMenu-289c3aac.js";import"./_commonjsHelpers-53f7dec1.js";const p=function(){r.commit("open/forms/startLoading");r.dispatch("open/workspaces/loadIfEmpty").then(()=>{r.dispatch("open/forms/loadIfEmpty",r.state["open/workspaces"].currentId)})};const h={name:"ShowForm",components:{VButton:n,ProTag:d,ExtraMenu:f},mixins:[l],beforeRouteEnter(o,t,s){p();s()},beforeRouteLeave(o,t,s){this.workingForm=null;s()},middleware:"auth",data(){return{metaTitle:"Home",tabsList:[{name:"Submissions",route:"forms.show"},{name:"Analytics",route:"forms.show.analytics"},{name:"Share",route:"forms.show.share"}]}},computed:{...m({user:"auth/user"}),...u({formsLoading:o=>o["open/forms"].loading,workspacesLoading:o=>o["open/workspaces"].loading}),workingForm:{get(){return this.$store.state["open/working_form"].content},set(o){this.$store.commit("open/working_form/set",o)}},workspace(){if(!this.form)return null;return this.$store.getters["open/workspaces/getById"](this.form.workspace_id)},form(){return this.$store.getters["open/forms/getBySlug"](this.$route.params.slug)},formEndpoint:()=>"/api/open/forms/{id}",loading(){return this.formsLoading||this.workspacesLoading},displayClosesDate(){if(this.form.closes_at){let o=new Date(this.form.closes_at);return o.getFullYear()+"-"+String(o.getMonth()+1).padStart(2,"0")+"-"+String(o.getDate()).padStart(2,"0")+" "+String(o.getHours()).padStart(2,"0")+":"+String(o.getMinutes()).padStart(2,"0")}return""}},watch:{form(){this.workingForm=new i(this.form)}},mounted(){if(this.form){this.workingForm=new i(this.form)}},methods:{openCrisp(){window.$crisp.push(["do","chat:show"]);window.$crisp.push(["do","chat:open"])},goBack(){this.$router.push({name:"home"})},openEdit(){this.$router.push({name:"forms.edit",params:{slug:this.form.slug}})}}};var w=function o(){var t=this,s=t._self._c;return s("div",{staticClass:"bg-white"},[t.form?[s("div",{staticClass:"flex bg-gray-50"},[s("div",{staticClass:"w-full md:w-4/5 lg:w-3/5 md:mx-auto md:max-w-4xl px-4"},[s("div",{staticClass:"pt-4 pb-0"},[s("a",{staticClass:"flex text-blue mb-2 font-semibold text-sm",attrs:{"href":"#"},on:{"click":function(e){e.preventDefault();return t.goBack.apply(null,arguments)}}},[s("svg",{staticClass:"w-3 h-3 text-blue mt-1 mr-1",attrs:{"viewBox":"0 0 6 10","fill":"none","xmlns":"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"d":"M5 9L1 5L5 1","stroke":"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})]),t._v(" Go back ")]),s("div",{staticClass:"flex"},[s("h2",{staticClass:"flex-grow text-gray-900 truncate"},[t._v(" "+t._s(t.form.title)+" ")]),s("div",{staticClass:"flex"},[s("extra-menu",{attrs:{"form":t.form}}),s("v-button",{directives:[{name:"track",rawName:"v-track.view_form_click",value:{form_id:t.form.id,form_slug:t.form.slug},expression:"{form_id:form.id, form_slug:form.slug}",modifiers:{"view_form_click":true}}],staticClass:"mr-2 text-blue-600 hidden sm:block",attrs:{"target":"_blank","to":{name:"forms.show_public",params:{slug:t.form.slug}},"color":"white"}},[s("svg",{staticClass:"w-6 h-6 inline -mt-1",attrs:{"viewBox":"0 0 24 24","fill":"none","xmlns":"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"d":"M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z","stroke":"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),s("path",{attrs:{"d":"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z","stroke":"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])]),s("v-button",{staticClass:"text-white",on:{"click":t.openEdit}},[s("svg",{staticClass:"inline mr-1 -mt-1",attrs:{"width":"18","height":"17","viewBox":"0 0 18 17","fill":"none","xmlns":"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"d":"M8.99998 15.6662H16.5M1.5 15.6662H2.89545C3.3031 15.6662 3.50693 15.6662 3.69874 15.6202C3.8688 15.5793 4.03138 15.512 4.1805 15.4206C4.34869 15.3175 4.49282 15.1734 4.78107 14.8852L15.25 4.4162C15.9404 3.72585 15.9404 2.60656 15.25 1.9162C14.5597 1.22585 13.4404 1.22585 12.75 1.9162L2.28105 12.3852C1.9928 12.6734 1.84867 12.8175 1.7456 12.9857C1.65422 13.1348 1.58688 13.2974 1.54605 13.4675C1.5 13.6593 1.5 13.8631 1.5 14.2708V15.6662Z","stroke":"currentColor","stroke-width":"1.67","stroke-linecap":"round","stroke-linejoin":"round"}})]),t._v(" Edit form ")])],1)]),s("ul",{staticClass:"flex text-gray-500"},[s("li",{staticClass:"pr-1"},[t._v(t._s(t.form.views_count)+" view"+t._s(t.form.views_count>0?"s":""))]),s("li",{staticClass:"list-disc ml-6 pr-1"},[t._v(t._s(t.form.submissions_count)+" submission"+t._s(t.form.submissions_count>0?"s":"")+" ")]),t.form.visibility=="draft"?s("li",{staticClass:"list-disc ml-6 pr-1 text-blue-500"},[t._v("Draft (not public)")]):t._e(),t.form.visibility=="closed"?s("li",{staticClass:"list-disc ml-6 pr-1 text-blue-500"},[t._v("Closed")]):t._e(),s("li",{staticClass:"list-disc ml-6"},[t._v("Edited "+t._s(t.form.last_edited_human))])]),t.form.closes_at?s("p",{staticClass:"text-yellow-500"},[t.form.is_closed?s("span",[t._v(" This form stopped accepting submissions on the "+t._s(t.displayClosesDate)+" ")]):s("span",[t._v(" This form will stop accepting submissions on the "+t._s(t.displayClosesDate)+" ")])]):t._e(),t.form.max_submissions_count>0?s("p",{staticClass:"text-yellow-500"},[t.form.max_number_of_submissions_reached?s("span",[t._v(" The form is now closed because it reached its limit of "+t._s(t.form.max_submissions_count)+" submissions. ")]):s("span",[t._v(" This form will stop accepting submissions after "+t._s(t.form.max_submissions_count)+" submissions. ")])]):t._e(),s("div",{staticClass:"mt-4 border-b border-gray-200 dark:border-gray-700"},[s("ul",{staticClass:"flex flex-wrap -mb-px text-sm font-medium text-center"},t._l(t.tabsList,function(e,a){return s("li",{key:a+1,staticClass:"mr-6"},[s("router-link",{staticClass:"hover:no-underline inline-block py-4 rounded-t-lg border-b-2 border-transparent text-gray-500 hover:text-gray-600",attrs:{"to":{name:e.route},"active-class":"text-blue-600 hover:text-blue-900 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500"}},[t._v(t._s(e.name))])],1)}),0)])])])]),s("div",{staticClass:"flex bg-white"},[s("div",{staticClass:"w-full md:w-4/5 lg:w-3/5 md:mx-auto md:max-w-4xl px-4"},[s("div",{staticClass:"py-4"},[s("transition",{attrs:{"name":"fade","mode":"out-in"}},[s("router-view",{attrs:{"form":t.form}})],1)],1)])])]:t.loading?s("div",{staticClass:"text-center w-full p-5"},[s("loader",{staticClass:"h-6 w-6 mx-auto"})],1):s("div",{staticClass:"text-center w-full p-5"},[t._v(" Form not found. ")])],2)};var _=[];var g=c(h,w,_,false,null,null,null,null);const y=g.exports;export{y as default};
