import{g as m}from"./vform.es-21186655.js";import{n as i,S as h,e as f}from"./app-d7e169b8.js";import"./_commonjsHelpers-53f7dec1.js";const p={name:"LoginWithGithub",computed:{githubAuth:()=>window.config.githubAuth,url:()=>"/api/oauth/github"},mounted(){window.addEventListener("message",this.onMessage,false)},beforeDestroy(){window.removeEventListener("message",this.onMessage)},methods:{async login(){const n=w("",this.$t("login"));const e=await this.$store.dispatch("auth/fetchOauthUrl",{provider:"github"});n.location.href=e},onMessage(n){if(n.origin!==window.origin||!n.data.token){return}this.$store.dispatch("auth/saveToken",{token:n.data.token});this.$router.push({name:"home"})}}};function w(n,e,t={}){if(typeof n==="object"){t=n;n=""}t={url:n,title:e,width:600,height:720,...t};const r=window.screenLeft!==void 0?window.screenLeft:window.screen.left;const u=window.screenTop!==void 0?window.screenTop:window.screen.top;const l=window.innerWidth||document.documentElement.clientWidth||window.screen.width;const c=window.innerHeight||document.documentElement.clientHeight||window.screen.height;t.left=l/2-t.width/2+r;t.top=c/2-t.height/2+u;const d=Object.keys(t).reduce((a,s)=>{a.push(`${s}=${t[s]}`);return a},[]).join(",");const o=window.open(n,e,d);if(window.focus){o.focus()}return o}var g=function n(){var e=this,t=e._self._c;return e.githubAuth?t("v-button",{attrs:{"color":"gray","type":"button"},on:{"click":e.login}},[t("div",{staticClass:"flex justify-center"},[e._v(" "+e._s(e.$t("login_with"))+" "),t("svg",{staticClass:"w-6 h-6 text-white ml-2",attrs:{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24"}},[t("path",{attrs:{"d":"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"}})])])]):e._e()};var _=[];var v=i(p,g,_,false,null,null,null,null);const b=v.exports;const y={name:"RegisterForm",components:{SelectInput:h,LoginWithGithub:b},props:{isQuick:{type:Boolean,required:false,default:false}},data:()=>({form:new m({name:"",email:"",password:"",password_confirmation:"",agree_terms:false}),mustVerifyEmail:false}),computed:{hearAboutUsOptions(){const n=[{name:"Facebook",value:"facebook"},{name:"Twitter",value:"twitter"},{name:"Reddit",value:"reddit"},{name:"Github",value:"github"},{name:"Search Engine (Google, DuckDuckGo...)",value:"search_engine"},{name:"Friend or Colleague",value:"friend_colleague"},{name:"Blog/Article",value:"blog_article"}].map(e=>({value:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(({value:e})=>e);n.push({name:"Other",value:"other"});return n}},methods:{async register(){const{data:n}=await this.form.post("/api/register");if(n.status){this.mustVerifyEmail=true}else{const{data:{token:e}}=await this.form.post("/api/login");this.$store.dispatch("auth/saveToken",{token:e});await this.$store.dispatch("auth/updateUser",{user:n});this.$logEvent("register",{source:this.form.hear_about_us});f(n);this.$crisp.push(["set","session:event",[[["register",{},"blue"]]]]);if(this.isQuick){this.$emit("afterQuickLogin")}else{this.$router.push({name:"forms.create"})}}}}};var k=function n(){var e=this,t=e._self._c;return t("div",[t("form",{staticClass:"mt-4",on:{"submit":function(r){r.preventDefault();return e.register.apply(null,arguments)},"keydown":function(r){return e.form.onKeydown(r)}}},[t("text-input",{attrs:{"name":"name","form":e.form,"label":e.$t("name"),"placeholder":"Your name","required":true}}),t("text-input",{attrs:{"name":"email","form":e.form,"label":e.$t("email"),"required":true,"placeholder":"Your email address"}}),t("select-input",{attrs:{"name":"hear_about_us","options":e.hearAboutUsOptions,"form":e.form,"placeholder":"Select option","label":"How did you hear about us?","required":true}}),t("text-input",{attrs:{"native-type":"password","placeholder":"Enter password","name":"password","form":e.form,"label":e.$t("password"),"required":true}}),t("text-input",{attrs:{"native-type":"password","form":e.form,"required":true,"placeholder":"Enter confirm password","name":"password_confirmation","label":e.$t("confirm_password")}}),t("checkbox-input",{attrs:{"form":e.form,"name":"agree_terms","required":true},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" I agree with the "),t("router-link",{attrs:{"to":{name:"terms-conditions"},"target":"_blank"}},[e._v("Terms and conditions")]),e._v(" and "),t("router-link",{attrs:{"to":{name:"privacy-policy"},"target":"_blank"}},[e._v("Privacy policy")]),e._v(" of the website and I accept them. ")]},proxy:true}])}),t("v-button",{attrs:{"loading":e.form.busy}},[e._v("Create an account")]),t("p",{staticClass:"text-gray-500 mt-4"},[e._v(" Already have an account? "),e.isQuick?t("a",{staticClass:"font-semibold ml-1",attrs:{"href":"#"},on:{"click":function(r){r.preventDefault();return e.$emit("openLogin")}}},[e._v("Log In")]):t("router-link",{staticClass:"font-semibold ml-1",attrs:{"to":{name:"login"}}},[e._v("Log In")])],1),t("login-with-github")],1)])};var $=[];var x=i(y,k,$,false,null,null,null,null);const S=x.exports;export{S as default};
